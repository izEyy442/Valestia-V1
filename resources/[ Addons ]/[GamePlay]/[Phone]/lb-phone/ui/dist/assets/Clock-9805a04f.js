import{r as v,a as r,j as e,F as w}from"./jsx-runtime-f40812bf.js";import{b as L,f as k,aM as A,L as c,ak as M,y as K,C as $,ab as D,ag as b,c as p,d as I,k as y,aN as H,aO as W,aP as x,au as U,h as R,aQ as V,aR as Z,aS as _,aT as j}from"./Phone-4e9b2e8a.js";import"./number-28525126.js";function B(){const t=L(p.Settings),[u,a]=v.useState({hour:0,minute:0}),[n,C]=v.useState(!1),i=L(A.Alarms),[d,S]=v.useState(null),T=s=>{let m=s.hour,l=s.minute;I("info",`Formatting time: ${m}:${l}`),t.time.twelveHourClock&&(m>12?m=m-12:m===0&&(m=12));let o,h;return m<10?o=`0${m}`:o=`${m}`,l<10?h=`0${l}`:h=`${l}`,t.time.twelveHourClock?`${o}:${h} ${s.hour>12?"PM":"AM"}`:`${o}:${h}`};return r("div",{className:"alarm-container",children:[d&&e(F,{cancel:()=>S(null),preTimer:{setPreTimer:a,preTimer:u},addAlarm:s=>{k("Clock",{action:"createAlarm",label:s.label,minutes:s.minutes,hours:s.hours}).then(m=>{m&&(A.Alarms.set([...i,{...s,id:m.id}]),S(null),a({hour:0,minute:0}))})}}),r("div",{className:"alarm-header",children:[r("div",{className:"alarm-header-top",children:[e("div",{className:"edit",onClick:()=>C(!n),children:n?c("APPS.CLOCK.ALARM.DONE"):c("APPS.CLOCK.ALARM.EDIT")}),e(M,{onClick:()=>{S(!0)}})]}),e("div",{className:"alarm-title",children:c("APPS.CLOCK.ALARM.TITLE")})]}),e("div",{className:"alarm-content",children:i.map((s,m)=>{let l=s.enabled?n?"":" active":"";return e("div",{className:`alarm${l}`,children:n?r(w,{children:[r("div",{className:"alarm-wrapper",children:[e(K,{onClick:()=>{$.PopUp.set({title:c("APPS.CLOCK.ALARM.DELETE_TITLE"),description:c("APPS.CLOCK.ALARM.DELETE_TEXT"),buttons:[{title:c("APPS.CLOCK.ALARM.BUTTON_CANCEL")},{title:c("APPS.CLOCK.ALARM.BUTTON_DELETE"),color:"red",cb:()=>{k("Clock",{action:"deleteAlarm",id:s.id}).then(()=>{A.Alarms.set(i.filter(o=>o.id!==s.id))})}}]})}}),r("div",{className:"alarm-info",children:[e("div",{className:"time",children:T({hour:s.hours,minute:s.minutes})}),e("div",{className:"label",children:s.label??c("APPS.CLOCK.ALARM.TITLE")})]})]}),e(D,{})]}):r(w,{children:[r("div",{className:"alarm-info",children:[e("div",{className:"time",children:T({hour:s.hours,minute:s.minutes})}),e("div",{className:"label",children:s.label??c("APPS.CLOCK.ALARM.TITLE")})]}),e(b,{onChange:()=>{k("Clock",{action:"toggleAlarm",id:s.id,enabled:!s.enabled}).then(o=>{A.Alarms.set(i.map((h,P)=>(P===m&&(h.enabled=!h.enabled),h)))})},checked:s.enabled,theme:"dark"})]})},m)})})]})}function F(t){const[u,a]=v.useState("");let n=t.preTimer;const C=()=>{t.addAlarm({id:null,hours:n.preTimer.hour,minutes:n.preTimer.minute,label:u&&u.length>0?u:null,enabled:!0})};return r("div",{className:"new-alarm",children:[r("div",{className:"new-alarm-header",children:[e("div",{className:"cancel",onClick:()=>{t.cancel()},children:c("APPS.CLOCK.ALARM.CANCEL")}),e("div",{className:"title",children:c("APPS.CLOCK.ALARM.ADD")}),e("div",{className:"save",onClick:()=>C(),children:c("APPS.CLOCK.ALARM.SAVE")})]}),r("div",{className:"new-alarm-content",children:[r("div",{className:"picker darker",children:[e("div",{children:r("ul",{onScroll:i=>{let d=Math.floor(i.target.scrollTop/(i.target.scrollHeight/28));n.setPreTimer({...n.preTimer,hour:d})},children:[e("li",{}),e("li",{}),[...Array(24).keys()].map((i,d)=>e("li",{onClick:S=>g(S.target),children:i<10?`0${i}`:i},d)),e("li",{}),e("li",{})]})}),e("div",{children:r("ul",{onScroll:i=>{let d=Math.floor(i.target.scrollTop/(i.target.scrollHeight/64));n.setPreTimer({...n.preTimer,minute:d})},children:[e("li",{}),e("li",{}),[...Array(60).keys()].map((i,d)=>e("li",{onClick:S=>g(S.target),children:i<10?`0${i}`:i},d)),e("li",{}),e("li",{})]})}),e("div",{className:"selected"})]}),r("div",{className:"settings",children:[r("div",{className:"item",children:[e("div",{className:"label",children:c("APPS.CLOCK.ALARM.LABEL")}),e(y,{type:"text",placeholder:c("APPS.CLOCK.ALARM.TITLE"),onChange:i=>{a(i.target.value)}})]}),r("div",{className:"item",children:[e("div",{className:"label",children:c("APPS.CLOCK.ALARM.SOUND")}),e(b,{disabled:!0,checked:!0})]}),r("div",{className:"item",children:[e("div",{className:"label",children:c("APPS.CLOCK.ALARM.SNOOZE")}),e(b,{disabled:!0,checked:!1})]})]})]})]})}function O(t){let u=t.disabled,a=t.active;return e("div",{className:H("button",a&&"active",u&&"disabled"),children:e("div",{className:"button-inner",style:{fontSize:t.content.length>7?"12px":"18px"},onClick:()=>{t.onClick()},children:t.content})})}function q(){const t=L(A.Stopwatch);return r("div",{className:"stopwatch-container",children:[e("div",{className:"clock",children:E(t.time,!0)}),r("div",{className:"actions",children:[e(O,{content:t.running||!t.running&&t.time==0?c("APPS.CLOCK.STOPWATCH.LAP"):c("APPS.CLOCK.STOPWATCH.RESET"),onClick:()=>{!t.running&&t.time!==0?A.Stopwatch.set({running:!1,time:0,laps:[]}):t.time>0&&A.Stopwatch.set({...t,laps:[...t.laps,t.time]})},disabled:!t.running&&t.time===0}),e(O,{active:t.running,onClick:()=>A.Stopwatch.set({...t,running:!t.running}),content:t.running?c("APPS.CLOCK.STOPWATCH.STOP"):c("APPS.CLOCK.STOPWATCH.START")})]}),e("div",{className:"laps",children:t.laps.map((u,a)=>r("div",{className:"lap",children:[r("div",{className:"label",children:[c("APPS.CLOCK.STOPWATCH.LAP")," ",a+1]}),e("div",{className:"time",children:E(a===0?u:u-t.laps[a-1],!0)})]},a))})]})}function Y(){const t=L(R),u=L(p.Settings),a=L(A.Timer),[n,C]=v.useState({hours:0,minutes:0,seconds:0}),i=v.useRef(null),d=v.useRef(null),S=v.useRef(null),[T,s]=v.useState(null);v.useEffect(()=>{let l=new Date(Date.now()+a.time*1e3);s(l.toLocaleTimeString(t.DateLocale,{hour:"numeric",minute:"numeric",hour12:u.time.twelveHourClock}))},[]);const m=()=>{let l=n.hours*3600+n.minutes*60+n.seconds;if(l>0){A.Timer.set({running:!0,time:l});let o=new Date(Date.now()+l*1e3);s(o.toLocaleTimeString(t.DateLocale,{hour:"numeric",minute:"numeric",hourCycle:"h23"}))}};return v.useEffect(()=>{var l,o,h;if(!a.running){A.Timer.set({running:!1,time:0});let P=(l=i.current)==null?void 0:l.querySelector(".active"),f=(o=d.current)==null?void 0:o.querySelector(".active"),N=(h=S.current)==null?void 0:h.querySelector(".active");P&&(P==null||P.scrollIntoView({block:"center"})),f&&(f==null||f.scrollIntoView({block:"center"})),N&&(N==null||N.scrollIntoView({block:"center"}))}},[a.running]),r("div",{className:"timer-container",children:[a.running?r(w,{children:[r("div",{className:"timer-wrapper",children:[e("div",{className:"border-wrapper",children:e(W,{value:a.time/(n.hours*3600+n.minutes*60+n.seconds)*100,strokeWidth:2,styles:x({strokeLinecap:"butt",pathColor:"#ff9f0a",trailColor:"#2d2d2d",pathTransitionDuration:.5})})}),r("div",{className:"timer",children:[e("div",{className:"timer-text",children:E(a.time,!1)}),T&&r("div",{className:"when-done",children:[e(U,{}),T]})]})]}),e("div",{className:"margin"})]}):r("div",{className:"picker","data-margin":!0,children:[r("div",{ref:i,children:[r("ul",{onScroll:l=>{let o=Math.floor(l.target.scrollTop/(l.target.scrollHeight/29));C({...n,hours:o})},children:[e("li",{}),e("li",{}),[...Array(24).keys()].map((l,o)=>e("li",{onClick:h=>g(h.target),className:n.hours===l?"active":"",children:e("span",{children:l})},o)),e("li",{}),e("li",{})]}),e("div",{className:"label",children:c("APPS.CLOCK.TIMER.HOURS")})]}),r("div",{ref:d,children:[r("ul",{onScroll:l=>{let o=Math.floor(l.target.scrollTop/(l.target.scrollHeight/65));C({...n,minutes:o})},children:[e("li",{}),e("li",{}),[...Array(60).keys()].map((l,o)=>e("li",{onClick:h=>g(h.target),className:n.minutes===l?"active":"",children:l},o)),e("li",{}),e("li",{})]}),e("div",{className:"label",children:c("APPS.CLOCK.TIMER.MINUTES")})]}),r("div",{ref:S,children:[r("ul",{onScroll:l=>{let o=Math.floor(l.target.scrollTop/(l.target.scrollHeight/65));C({...n,seconds:o})},children:[e("li",{}),e("li",{}),[...Array(60).keys()].map((l,o)=>e("li",{onClick:h=>g(h.target),className:n.seconds===l?"active":"",children:l},o)),e("li",{}),e("li",{})]}),e("div",{className:"label",children:c("APPS.CLOCK.TIMER.SECONDS")})]}),e("div",{className:"selected"})]}),r("div",{className:"actions",children:[e(O,{content:c("APPS.CLOCK.TIMER.CANCEL"),onClick:()=>{a.running&&A.Timer.set({running:!1,time:0})},disabled:!a.running}),e(O,{content:a.running?c("APPS.CLOCK.TIMER.STOP"):c("APPS.CLOCK.TIMER.START"),onClick:()=>{a.running?A.Timer.set({...a,running:!1}):m()},active:!1})]})]})}function z(){const t=L(R),u=L(p.Settings),a=t.world_clock_locations,n=i=>new Date().toLocaleTimeString(t.DateLocale,{timeZone:a[i],hour:"2-digit",minute:"2-digit",hour12:u.time.twelveHourClock}),C=i=>{const d=new Date;let S=d.toLocaleTimeString([],{hour:"2-digit",hour12:!1}),T=d.toLocaleDateString([],{day:"numeric"}),s=d.toLocaleTimeString([],{hour:"2-digit",hour12:!1,timeZone:a[i]}),m=d.toLocaleDateString([],{day:"numeric",timeZone:a[i]}),l=parseInt(s)-parseInt(S);return m>T?`${c("APPS.CLOCK.WORLDCLOCK.TOMORROW")} ${l>0?"+":""}${l}HRS`:m<T?`${c("APPS.CLOCK.WORLDCLOCK.YESTERDAY")} ${l>0?"+":""}${l}HRS`:`${c("APPS.CLOCK.WORLDCLOCK.TODAY")} ${l>0?"+":""}${l}HRS`};return r("div",{className:"worldclock-container",children:[e("div",{className:"worldclock-header",children:e("div",{className:"worldclock-title",children:c("APPS.CLOCK.WORLDCLOCK.TITLE")})}),e("div",{className:"worldclock-content",children:Object.keys(a).map((i,d)=>r("div",{className:"worldclock",children:[r("div",{className:"worldclock-location",children:[e("div",{className:"difference",children:C(i)}),e("div",{className:"location",children:i})]}),e("div",{className:"time",children:n(i)})]},d))})]})}function J(){var C;const t=L(p.App),[u,a]=v.useState(((C=t==null?void 0:t.data)==null?void 0:C.view)??"Timer");let n={"World Clock":{icon:e(V,{}),title:c("APPS.CLOCK.WORLDCLOCK.TITLE"),view:e(z,{})},Alarm:{icon:e(Z,{}),title:c("APPS.CLOCK.ALARM.TITLE"),view:e(B,{})},Stopwatch:{icon:e(_,{}),title:c("APPS.CLOCK.STOPWATCH.TITLE"),view:e(q,{})},Timer:{icon:e(j,{}),title:c("APPS.CLOCK.TIMER.TITLE"),view:e(Y,{})}};return r("div",{className:"clock-container",children:[e("div",{className:"clock-body",children:n[u].view}),e("div",{className:"clock-footer",children:Object.keys(n).map((i,d)=>{var S,T,s;return r("div",{className:`${u==i?"active":""}`,style:{fontSize:((S=n[i])==null?void 0:S.title.length)>10?"13px":"14px"},onClick:()=>a(i),children:[(T=n[i])==null?void 0:T.icon,(s=n[i])==null?void 0:s.title]},d)})})]})}const E=(t,u)=>{if(u){let a=t%100,n=Math.floor(t/100)%60,C=Math.floor(t/6e3)%60,i=Math.floor(t/36e4)%24;return i>0?`${i.toString().padStart(2,"0")}:${C.toString().padStart(2,"0")}:${n.toString().padStart(2,"0")}.${a.toString().padStart(2,"0")}`:`${C.toString().padStart(2,"0")}:${n.toString().padStart(2,"0")}.${a.toString().padStart(2,"0")}`}else{let a=t%60,n=Math.floor(t/60)%60;return`${(Math.floor(t/3600)%24).toString().padStart(2,"0")}:${n.toString().padStart(2,"0")}:${a.toString().padStart(2,"0")}`}},g=t=>{t&&t.scrollIntoView({behavior:"smooth",block:"center"})};export{J as default,E as formatTime,g as snapElement};
